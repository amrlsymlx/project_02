<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
        <!-- HTML code for the dropdown list and search box -->
    <form>
        <!-- Dropdown list for movie genres -->
        <label for="genre">Genre:</label>
        <select id="genre">
        <option value="">All</option>
        <!-- Populate the dropdown list with genres from the TMDb API -->
        </select>
        <!-- Search box for movie titles -->
        <label for="search">Search:</label>
        <input type="text" id="search" />
        <button type="submit">Go</button>
    </form>
    
    <!-- Div to display the combined genre and movie title -->
    <div id="combined"></div>

    <script>
        // JavaScript code to handle the form submission and display the combined genre and movie title

        // Get references to the form elements
        const form = document.querySelector('form');
        const genreSelect = document.querySelector('#genre');
        const searchInput = document.querySelector('#search');

        // Function to fetch the movie genres from the TMDb API and populate the dropdown list
        async function populateGenres() {
        try {
            // Make a GET request to the TMDb API to get the list of movie genres
            const response = await fetch('https://api.themoviedb.org/3/genre/movie/list?api_key=3fd2be6f0c70a2a598f084ddfb75487c&language=en-US');
            const genres = await response.json();
            // Loop through the genres and add an option element to the dropdown list for each genre
            genres.genres.forEach(genre => {
            const option = document.createElement('option');
            option.value = genre.id;
            option.textContent = genre.name;
            genreSelect.appendChild(option);
            });
        } catch (error) {
            console.error(error);
        }
        }

        // Function to combine the selected genre and movie title
        function combineGenreAndTitle() {
        // Get the selected genre and movie title
        const genre = genreSelect.value;
        const title = searchInput.value;
        // Get the genre name from the dropdown list
        const genreOption = genreSelect.querySelector(`option[value="${genre}"]`);
        const genreName = genreOption ? genreOption.textContent : '';
        // Display the combined genre and movie title
        document.querySelector('#combined').textContent = `Genre: ${genreName} | Title: ${title}`;
            
        console.log(title);
    }

        // Add event listeners to the form and input elements
        form.addEventListener('submit', event => {
        event.preventDefault();
        combineGenreAndTitle();
        });
        searchInput.addEventListener('input', combineGenreAndTitle);

        // Populate the dropdown list with genres when the page loads
        populateGenres();
    </script>
</body>
</html>